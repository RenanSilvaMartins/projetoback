# ========================================
# CONFIGURAÇÃO PRINCIPAL DO BACKEND
# ========================================
# Sistema de Gerenciamento - Backend API
# Configurações para desenvolvimento e produção
# Integração com Frontend: mantenha a porta e credenciais compatíveis

# ========================================
# CONFIGURAÇÕES DO SERVIDOR
# ========================================
server.port=8082
server.servlet.context-path=/
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# Configurações de compressão para melhor performance
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# ========================================
# CONFIGURAÇÕES DA APLICAÇÃO
# ========================================
spring.application.name=sistema-gerenciamento-backend
spring.profiles.active=dev

# Banner customizado
spring.banner.charset=UTF-8
spring.main.banner-mode=console

# ========================================
# CONFIGURAÇÕES DO BANCO DE DADOS H2 (DESENVOLVIMENTO)
# ========================================
# H2 Database (em memória para desenvolvimento)
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.url=jdbc:h2:mem:sistemagerenciamento;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.platform=h2

# Pool de conexões HikariCP
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ========================================
# CONFIGURAÇÕES JPA/HIBERNATE
# ========================================
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.generate_statistics=false

# Configurações para reduzir warnings
spring.jpa.open-in-view=false
spring.jpa.defer-datasource-initialization=true

# ========================================
# CONSOLE H2 (APENAS DESENVOLVIMENTO)
# ========================================
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.trace=false
spring.h2.console.settings.web-allow-others=false

# ========================================
# CONFIGURAÇÕES DE SEGURANÇA JWT
# ========================================
jwt.secret=mySuperSecretKey123456789012345678901234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ
jwt.expiration=86400000
# 86400000 ms = 24 horas

# Configurações de autenticação
auth.token.header=Authorization
auth.token.prefix=Bearer 
auth.password.strength=medium

# ========================================
# CONFIGURAÇÕES DE EMAIL (SENDGRID)
# ========================================
spring.mail.host=smtp.sendgrid.net
spring.mail.port=587
spring.mail.username=apikey
spring.mail.password=${SENDGRID_API_KEY:your-sendgrid-key}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Configurações de email da aplicação
app.mail.from=noreply@empresa.com
app.mail.from-name=Sistema de Gerenciamento
app.mail.support=suporte@empresa.com

# ========================================
# CONFIGURAÇÕES DE LOGGING
# ========================================
logging.level.root=INFO
logging.level.com.itb.inf2fm.projetoback=INFO
logging.level.org.springframework.security=WARN
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN

# Configuração de arquivo de log
logging.file.name=logs/application.log
logging.logback.rollingpolicy.file-name-pattern=logs/application-%d{yyyy-MM-dd}.%i.log
logging.logback.rollingpolicy.max-file-size=10MB
logging.logback.rollingpolicy.max-history=30
logging.logback.rollingpolicy.total-size-cap=1GB

# ========================================
# SPRING BOOT ACTUATOR - MONITORAMENTO
# ========================================
management.endpoints.web.exposure.include=health,metrics,info,prometheus,env,configprops,beans,conditions
management.endpoints.web.base-path=/actuator
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always
management.endpoint.info.enabled=true

# Configurações de saúde
management.health.diskspace.enabled=true
management.health.db.enabled=true

# ========================================
# MÉTRICAS E OBSERVABILIDADE
# ========================================
management.metrics.export.prometheus.enabled=true
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.metrics.distribution.percentiles.http.server.requests=0.5,0.9,0.95,0.99
management.metrics.tags.application=${spring.application.name}

# ========================================
# INFORMAÇÕES DA APLICAÇÃO
# ========================================
info.app.name=@project.name@
info.app.description=@project.description@
info.app.version=@project.version@
info.app.encoding=@project.build.sourceEncoding@
info.app.java.version=@java.version@
info.app.environment=${spring.profiles.active}
info.app.build.time=@maven.build.timestamp@

# ========================================
# CONFIGURAÇÕES THYMELEAF
# ========================================
spring.thymeleaf.check-template-location=false
spring.thymeleaf.enabled=false

# ========================================
# CONFIGURAÇÕES DE VALIDAÇÃO
# ========================================
spring.validation.group-convert=true

# ========================================
# CONFIGURAÇÕES DE SERIALIZAÇÃO JSON
# ========================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.serialization.fail-on-empty-beans=false
spring.jackson.deserialization.fail-on-unknown-properties=false
spring.jackson.default-property-inclusion=NON_NULL
spring.jackson.time-zone=America/Sao_Paulo
spring.jackson.locale=pt_BR

# ========================================
# CONFIGURAÇÕES DE CACHE
# ========================================
spring.cache.type=simple
spring.cache.cache-names=usuarios,clientes,tecnicos,especialidades,regioes

# ========================================
# CONFIGURAÇÕES DE TASK ASYNC
# ========================================
spring.task.execution.pool.core-size=4
spring.task.execution.pool.max-size=16
spring.task.execution.pool.queue-capacity=100
spring.task.execution.thread-name-prefix=async-task-

# ========================================
# CONFIGURAÇÕES DE UPLOAD
# ========================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# ========================================
# CONFIGURAÇÕES ESPECÍFICAS DA APLICAÇÃO
# ========================================
app.name=Sistema de Gerenciamento
app.version=1.0.0
app.description=API REST para gerenciamento de usuários, clientes, técnicos, especialidades e regiões
app.contact.name=Equipe de Desenvolvimento
app.contact.email=dev@empresa.com
app.contact.url=https://github.com/RenanSilvaMartins/projetoback

# URLs do frontend (para CORS e redirecionamentos)
app.frontend.url.dev=http://localhost:3000
app.frontend.url.prod=https://app.empresa.com

# Configurações de negócio
app.business.max-login-attempts=5
app.business.account-lock-duration=30
app.business.password-reset-token-validity=3600
app.business.default-page-size=20
app.business.max-page-size=100